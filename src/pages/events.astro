---
import SectionPageLayout from "../layouts/SectionPageLayout.astro";
import { sakaiVirtualConferences } from "../data/sakaiConRecordings";
const withBase = (path: string) =>
  `${import.meta.env.BASE_URL.replace(/\/$/, "")}/${path.replace(/^\/+/, "")}`;

const formatDate = (value: string) =>
  new Date(value).toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "numeric"
  });
---

<SectionPageLayout
  title="Events | Sakai LMS"
  description="Sakai hosts periodic conferences and community events, including recent SakaiCon sessions."
  kicker="Events"
  heading="Sakai Conference Sessions"
>
  <article class="hard-border block-shadow-soft bg-[var(--sakai-paper)] p-6">
    <p class="text-lg leading-relaxed text-[var(--sakai-ink)]">
      Sakai holds periodic conferences and events with sessions led by institutions, implementers, and contributors across the global community.
    </p>
  </article>

  {sakaiVirtualConferences.map((conference, index) => (
    <section class:list={[
      "hard-border block-shadow-soft p-6",
      index % 2 === 0 ? "bg-[var(--sakai-ink)] text-[var(--sakai-paper)]" : "bg-[var(--sakai-paper)] text-[var(--sakai-ink)]"
    ]}>
      <h2 class="sans text-2xl font-black uppercase">{conference.heading} Sessions</h2>
      <p class:list={[
        "mt-2 text-sm",
        index % 2 === 0 ? "text-[var(--sakai-paper)]/85" : "text-[var(--sakai-ink-soft)]"
      ]}>
        {conference.summary}
      </p>
      <a
        href={conference.playlistHref}
        target="_blank"
        rel="noreferrer"
        class:list={[
          "mt-4 inline-flex hard-border px-3 py-2 text-xs font-bold uppercase tracking-wide",
          index % 2 === 0
            ? "bg-[var(--sakai-paper)] text-[var(--sakai-ink)]"
            : "bg-[var(--sakai-ink)] text-[var(--sakai-paper)]"
        ]}
      >
        Open Full Playlist
      </a>
      <div class="mt-4 grid gap-3 md:grid-cols-2">
        {conference.recordings.map((item) => (
          <a
            href={item.href}
            target="_blank"
            rel="noreferrer"
            class:list={[
              "hard-border p-4",
              index % 2 === 0 ? "bg-[var(--sakai-paper)]/10" : "bg-white"
            ]}
          >
            <h3 class="sans text-sm font-black uppercase leading-tight">{item.title}</h3>
            <p class:list={[
              "mt-2 text-xs",
              index % 2 === 0 ? "text-[var(--sakai-paper)]/90" : "text-[var(--sakai-ink-soft)]"
            ]}>
              {formatDate(item.date)}
            </p>
          </a>
        ))}
      </div>
    </section>
  ))}

  <section class="grid gap-4 md:grid-cols-3">
    <a href={withBase("/videos")} class="hard-border block-shadow-soft bg-white p-5 transition hover:-translate-x-0.5 hover:-translate-y-0.5">
      <h2 class="sans text-xl font-black uppercase text-[var(--sakai-ink)]">More Session Videos</h2>
      <p class="mt-3 text-sm leading-relaxed text-[var(--sakai-ink-soft)]">Browse additional SakaiCon recordings and feature sessions.</p>
    </a>
    <a href={withBase("/conference-resources")} class="hard-border block-shadow-soft bg-white p-5 transition hover:-translate-x-0.5 hover:-translate-y-0.5">
      <h2 class="sans text-xl font-black uppercase text-[var(--sakai-ink)]">Conference Resources</h2>
      <p class="mt-3 text-sm leading-relaxed text-[var(--sakai-ink-soft)]">Access reference materials shared for EDUCAUSE and event attendees.</p>
    </a>
    <a href="https://www.youtube.com/@SakaiCLE" target="_blank" rel="noreferrer" class="hard-border block-shadow-soft bg-white p-5 transition hover:-translate-x-0.5 hover:-translate-y-0.5">
      <h2 class="sans text-xl font-black uppercase text-[var(--sakai-ink)]">Sakai YouTube</h2>
      <p class="mt-3 text-sm leading-relaxed text-[var(--sakai-ink-soft)]">Follow the Sakai channel for the latest conference uploads and demos.</p>
    </a>
  </section>
</SectionPageLayout>
